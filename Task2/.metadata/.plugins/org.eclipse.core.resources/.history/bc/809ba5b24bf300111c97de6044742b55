import java.util.*;


public class BfsSolver implements ISolver{
		
		public BfsSolver (){}
				
		public int solve(IState initialState){
			
			Map<IState,IState> visited = new HashMap<IState,IState>();
			List<IState> fringe = new LinkedList<IState>();
			List<IState> nextFringe = new LinkedList<IState>();
			
			visited.put(initialState, null);
			fringe.add(initialState);
			int moves = 0;
			
			while (true){
				for (IState currState : fringe){
					if (currState.isWinning())
						return moves;
					Set <IState> nextStates = currState.nextStates();
					for (IState s : nextStates)
						if (!visited.containsKey(s)&&!s.exclude()){
							nextFringe.add(s);
							visited.put(s, currState);
						}
					
				}
				if (nextFringe.isEmpty())
					return -1;
				fringe = nextFringe;
				nextFringe = new LinkedList<IState>();
				moves++;
			}
		}
}
